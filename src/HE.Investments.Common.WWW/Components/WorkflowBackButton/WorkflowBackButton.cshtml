@model (string Action, string ParamName)

@{
    #nullable enable
    var isSubSection = !string.IsNullOrEmpty(Model.ParamName);

    var routeData = ViewContext.RouteData.Values
        .Where(v => v.Key != "action" && (!isSubSection || v.Key != Model.ParamName))
        .ToDictionary(k => k.Key, v => v.Value?.ToString() ?? string.Empty);

    if (routeData.Any())
    {
        routeData.Add("currentPage", Model.Action);
        routeData.Add("action", "Back");

        if (isSubSection)
        {
            ViewContext.RouteData.Values.TryGetValue(Model.ParamName, out object? paramValue);
            routeData.Add("id", paramValue?.ToString() ?? string.Empty);
        }
    }
}

@if (routeData.Any())
{
    <gds-back-link href="@Url.RouteUrl(isSubSection ? "subSection" : "section", routeData)" text="Back" class="govuk-!-margin-bottom-8"></gds-back-link>
}
