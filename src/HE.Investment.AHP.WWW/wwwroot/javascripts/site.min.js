(()=>{const n=()=>{var n=document.getElementsByClassName("govuk-cookie-banner"),r,u;if(n.length===1){if(r=i("accept_additional_cookies"),r!==undefined){n[0].remove();return}n[0].classList.remove("govuk-!-display-none");u=n[0].getElementsByTagName("button");for(let i of u)i.onclick=()=>{t(i.value),n[0].remove()}}},t=n=>{const t=new Date;t.setTime(t.getTime()+31536e6);document.cookie="accept_additional_cookies=".concat(n,"; expires=",t.toUTCString(),"; path=/; secure")},i=n=>{if(document.cookie!==""){const t=document.cookie.split(/; */);for(let t of t){const[i,r]=t.split("=");if(i===decodeURIComponent(n))return decodeURIComponent(r)}}return undefined};document.addEventListener("DOMContentLoaded",function(){n()})})();(()=>{const n="exclusive-checkbox-group",t=`${n}--exclusive-option`,r=()=>{const r=document.getElementsByClassName(n),u=document.getElementsByClassName(t);r.length===1&&u.length===1&&(i(r[0].getElementsByTagName("input"),t),i(u[0].getElementsByTagName("input"),n))},i=(n,t)=>{for(let i=0;i<n.length;i++)n[i].addEventListener("change",n=>{n.currentTarget.value&&u(t)})},u=n=>{const t=document.getElementsByClassName(n).item(0).getElementsByTagName("input");for(let n=0;n<t.length;n++)t[n].checked=!1};document.addEventListener("DOMContentLoaded",function(){r()})})();(()=>{const t=`.govuk-file-upload[type="file"]`,r="file-input-form-group",u="validation-summary",i="validation-error-list",e=`.govuk-button[type="submit"]`,o="MaxFileSizeInMegabytes",s="upload-file-url",h="remove-file-url-template",c="download-file-url-template",n=()=>document.querySelectorAll(t)[0].id,l=t=>`<span id="${n()}-error" class="govuk-error-message field-validation-error" data-valmsg-for="${n()}" data-valmsg-replace="true"><span class="govuk-visually-hidden">Error:</span>${t}</span>`,a=()=>`<div aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary" id="${u}" class="govuk-error-summary">
      <h2 id="error-summary-title" class="govuk-error-summary__title">
        There is a problem
      </h2>
      <div class="govuk-error-summary__body">
        <div data-valmsg-summary="true" id="${i}" class="govuk-error-message">
          <ul class="govuk-list govuk-error-summary__list"></ul>
        </div>
      </div>
    </div>`,v=t=>`<li><a href="#${n()}">${t}</a></li>`,y=(n,t)=>`<tr class="govuk-table__row" id="file-${n}">
      <td class="govuk-table__cell govuk-!-font-weight-bold">${f(t)}</td>
      <td class="govuk-table__cell"></td>
      <td class="govuk-table__cell govuk-!-text-align-right">Queued</td>
    </tr>`,p=n=>`<a class="govuk-link--no-visited-state govuk-!-margin-left-4 govuk-link" href="${n}">Remove</a>`,w=(n,t)=>`<a class="govuk-link" href="${t}">${f(n)}</a>`,b=()=>{const h=document.getElementById(o).value,a=h*1048576,i=document.querySelectorAll(t)[0],c=document.querySelectorAll(e)[0],r=document.getElementById(s),v=document.querySelectorAll('input[name="__RequestVerificationToken"]')[0].value,n=new DataTransfer,u={},f=r!==null&&r!==undefined;for(let t=0;t<i.files.length;t++)n.items.add(i.files[t]);c.disabled=!0;i.disabled=f;let l=!1;it();ft();for(let t=n.files.length-1;t>=0;t--)if(n.files[t].size>a){const n=`The selected file must be smaller than ${h}MB`;l=!0;tt(n);rt(n)}else if(f){const i=(Math.random()+1).toString(36).substring(7);k(i,n.files[t]);u[i]=n.files[t];n.items.remove(t)}if(f){i.files=n.files;for(let n in u){const f=r.value,i=u[n],t=new FormData;t.append("__RequestVerificationToken",v);t.append("file",i);d(n);fetch(f,{method:"POST",body:t}).then(t=>t.ok?g(n,i.name,t):nt(n,t))}}l||(c.disabled=!1);i.disabled=!1},k=(n,t)=>{const i=document.getElementsByClassName("govuk-table__body")[0];i.innerHTML+=y(n,t.name)},d=n=>{const t=document.querySelector(`#file-${n} :nth-child(3)`);t.innerHTML='<div class="loader-line"><\/div>'},g=(n,t,i)=>i.json().then(i=>{const e=document.querySelector(`#file-${n} :nth-child(1)`),o=document.querySelector(`#file-${n} :nth-child(2)`),r=document.querySelector(`#file-${n} :nth-child(3)`);o.innerText=i.uploadDetails;const u=document.getElementById(h);if(i.canBeRemoved&&u){const n=u.value.replace("%3AfileId",i.fileId);r.innerHTML=p(n)}else r.innerHTML="";const f=document.getElementById(c);if(f){const n=f.value.replace("%3AfileId",i.fileId);e.innerHTML=w(t,n)}}),nt=(n,t)=>{const i=document.querySelector(`#file-${n} :nth-child(2)`),r=document.querySelector(`#file-${n} :nth-child(3)`);return(i.innerText="Upload failed",r.innerHTML="",t.status===400)?t.json().then(n=>{Array.isArray(n)&&n.length>0&&n[0].errorMessage&&(i.innerText=n[0].errorMessage)}):Promise.resolve()},tt=n=>{const i=document.getElementById(r);document.querySelectorAll(t)[0].insertAdjacentHTML("beforebegin",l(n));i.classList.add("govuk-form-group--error")},it=()=>{const i=document.getElementById(r),t=document.getElementById(`${n()}-error`);t&&t.remove();i.classList.remove("govuk-form-group--error")},rt=n=>{let t=document.getElementById(i);if(!t){const n=document.getElementsByTagName("form");n[0].children[0].insertAdjacentHTML("afterend",a());t=document.getElementById(i)}t.getElementsByTagName("ul")[0].innerHTML+=v(n)},ut=t=>{const i=t.getElementsByTagName("a");for(let t=0;t<i.length;t++)i[t].href.endsWith(`#${n()}`)&&i[t].parentNode.remove()},ft=()=>{const n=document.getElementById(i);n&&(ut(n),n.getElementsByTagName("a").length===0&&document.getElementById(u).remove())},f=n=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return n.replace(/[&<>"'/]/ig,n=>t[n])};document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(t)[0];n!==null&&n!==undefined&&n.addEventListener("change",b)})})();