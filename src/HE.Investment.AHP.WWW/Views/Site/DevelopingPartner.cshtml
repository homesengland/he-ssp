@using HE.Investment.AHP.Contract.Site
@using HE.Investment.AHP.WWW.Models.Site
@using HE.Investment.AHP.WWW.Views.Shared.Components.AhpWorkflowBackButton
@using HE.Investment.AHP.WWW.Views.Shared.Components.ReturnToSitesLink
@using HE.Investment.AHP.WWW.Views.Site.Const
@using HE.Investments.Common.Contract.Pagination
@using HE.Investments.Common.WWW.Components.PageHeader
@using HE.Investments.Common.WWW.Components.SelectList
@model HE.Investment.AHP.WWW.Models.Site.SelectPartnerModel;
@{
    ViewData["Title"] = SitePageTitles.DevelopingPartner;
    var workflow = Context.Request.Query["workflow"];

    var items = new PaginationResult<SelectListItemViewModel>(
        Model.ConsortiumMembers.Items.Select(x => new PartnerSelectListItemViewModel(
            Url.Action("DevelopingPartnerConfirm", new { Model.SiteId, organisationId = x.OrganisationId.Value, workflow }) ?? string.Empty,
            x)).ToList<SelectListItemViewModel>(),
        Model.ConsortiumMembers.CurrentPage,
        Model.ConsortiumMembers.ItemsPerPage,
        Model.ConsortiumMembers.TotalItems);
}

<gds-div-grid-column-two-thirds>
    <vc:ahp-workflow-back-button current-page="@SiteWorkflowState.DevelopingPartner"/>
    <vc:page-header title="@SitePageTitles.DevelopingPartner" caption="@Model.SiteName"/>

    <gds-p>This is the partner who is responsible for the development during the build.</gds-p>
    <gds-p>If you cannot find the partner. you'll need to add them to your consortium.</gds-p>

    <vc:select-list
        items="@items"
        paging-navigation-url="@Url.Action("DevelopingPartner", "Site", new { siteId = Model.SiteId, workflow })"/>

    <vc:return-to-sites-link is-link-inside-form="false" is-editable="false"/>
</gds-div-grid-column-two-thirds>
