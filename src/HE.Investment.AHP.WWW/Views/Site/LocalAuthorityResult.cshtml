@using He.AspNetCore.Mvc.Gds.Components.TagHelpers.Divs
@using He.AspNetCore.Mvc.Gds.Components.TagHelpers.Headings
@using HE.Investment.AHP.Contract.Site
@using HE.Investment.AHP.WWW.Views.Shared.Components.AhpWorkflowBackButton
@using HE.Investment.AHP.WWW.Views.Site
@using HE.Investments.Common.Contract.Pagination
@using HE.Investments.Common.WWW.Components.SelectList
@using HE.Investments.Common.WWW.Models
@using SelectList = Microsoft.AspNetCore.Mvc.Rendering.SelectList
@model HE.Investment.AHP.Contract.Site.LocalAuthorities;
@{
    ViewData["Title"] = SitePageTitles.LocalAuthorityResult;
    var redirect = Context.Request.Query["redirect"];

    var items = new PaginationResult<SelectListItemViewModel>(
        Model.Page.Items.Select(i => new SelectListItemViewModel(
            Url.Action("LocalAuthorityConfirm", "Site", new { siteId = Model.SiteId, localAuthorityId = i.Id, localAuthorityName = i.Name, phrase = Model.Phrase, redirect }),
            i.Name,
            null)).ToList(),
        Model.Page.CurrentPage,
        Model.Page.ItemsPerPage,
        Model.Page.TotalItems);
}

<gds-div-grid-column-two-thirds>
    <vc:ahp-workflow-back-button current-page="@SiteWorkflowState.LocalAuthorityResult"/>

    <gds-h1 size="ControlSize.L" class="govuk-!-margin-bottom-6">
        @SitePageTitles.LocalAuthorityResult
    </gds-h1>

    <vc:select-list
        items="@items"
        paragraph-with-link="@(new ParagraphWithLinkModel("If your local authority is not listed above, your", new LinkModel("LocalAuthorityReset", "Site", new { siteId = Model.SiteId, redirect }), "Growth Manager can add this for you later."))"
        paging-navigation-url="@Url.Action("LocalAuthorityResult", "Site", new { siteId = Model.SiteId, localAuthorityId = Model.LocalAuthorityId, phrase = Model.Phrase })"/>

    @Html.HiddenFor(c => c.SiteId)
</gds-div-grid-column-two-thirds>
