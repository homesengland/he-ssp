@using HE.InvestmentLoans.Common.Utils.Constants.FormOption;
@model HE.InvestmentLoans.Contract.Projects.ViewModels.ProjectViewModel;
@{
    var id = ViewContext.RouteData.Values["id"];
    var typeHomesList = new List<string>();

    // if (Model?.TypeHomes != null)
    // {
    //     foreach (var typeHome in Model.TypeHomes)
    //     {
    //         if (typeHome != "other")
    //         {
    //             typeHomesList.Add(typeHome);
    //         }
    //     }
    // }
    // if (!string.IsNullOrEmpty(Model?.TypeHomesOther))
    // {
    //     typeHomesList.Add(Model.TypeHomesOther);
    // }

    var grantFundingMore = new List<string>();

    if (Model?.GrantFundingProviderName != null)
    {
        grantFundingMore.Add($"Previous funding: {Model.GrantFundingProviderName}");
        grantFundingMore.Add($"Amount: {MoneyLabelHelper.Pounds(Model.GrantFundingAmount)}");
        grantFundingMore.Add($"Name of the grant/found: {Model.GrantFundingName}");
        grantFundingMore.Add($"It was for: {Model.GrantFundingPurpose}");
    }

    var additionalProjectDetails = new List<string>();

    if (Model?.Cost != null)
    {
        var purchaseDate = DateHelper.ConvertToDateString(Model.PurchaseDay, Model.PurchaseMonth, Model.PurchaseYear);
        additionalProjectDetails.Add($"Purchased: {purchaseDate}");
        additionalProjectDetails.Add($"Purchase cost: {MoneyLabelHelper.Pounds(Model.Cost)}");
        additionalProjectDetails.Add($"Current value: {MoneyLabelHelper.Pounds(Model.Value)}");
        additionalProjectDetails.Add($"Source: {TemporaryFormOptions.SiteAdditionalSource.GetSummaryLabel(Model.Source)}");
    }
}

<gds-summary-list class="govuk-!-margin-bottom-9">

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
           {
               { "Title", ProjectFieldNames.Name },
               { "Value", Model?.Name },
               { "Link", Url.Action("ProjectName", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
               { "LinkId", "name" },
               { "IsEditable", Model?.IsEditable() }
           })

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
           {
               { "Title", ProjectFieldNames.StartDate },
               {
                   "Value", DateHelper.ConvertToDateStringWithDescription(
                       Model?.EstimatedStartDay, Model?.EstimatedStartMonth,
                       Model?.EstimatedStartYear, Model?.HasEstimatedStartDate)
               },
               { "Link", Url.Action("StartDate", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
               { "LinkId", "start-date" },
               { "IsEditable", Model?.IsEditable() }
           })

    @*     @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
    {
    { "Title", "Number of homes" },
    { "Value", Model?.ManyHomes },
    { "Link", Url.Action("Change","Site", new {id = id, site=Model.Id, state = "ManyHomes" }) },
    { "IsEditable", Model?.IsEditable() }
    })

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
    {
    { "Title", "Type of homes" },
    { "Value", TemporaryFormOptions.SiteTypeHomesCheckbox.GetSummaryLabel(typeHomesList) },
    { "Link", Url.Action("Change","Site", new {id = id, site=Model.Id, state = "TypeHomes" }) },
    { "IsEditable", Model?.IsEditable() }
    })

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
    {
    { "Title", "Type of project" },
    { "Value", TemporaryFormOptions.SiteType.GetSummaryLabel(Model?.Type) },
    { "Link", Url.Action("Change","Site", new {id = id, site=Model.Id, state = "Type" }) },
    { "IsEditable", Model?.IsEditable() }
    }) *@

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
           {
               { "Title", ProjectFieldNames.PlanningReferenceNumberExists },
               { "Value", Model?.PlanningReferenceNumberExists },
               { "Link", Url.Action("PlanningReferenceNumberExists", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
               { "LinkId", "reference-number-exists" },
               { "IsEditable", Model?.IsEditable() }
           })

    @if (Model.PlanningReferenceNumberExists == CommonResponse.Yes)
    {
        @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
               {
                   { "Title", ProjectFieldNames.PlanningReferenceNumber },
                   { "Value", Model?.PlanningReferenceNumber },
                   { "Link", Url.Action("PlanningReferenceNumber", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
                   { "LinkId", "reference-number" },
                   { "IsEditable", Model?.IsEditable() }
               })

        @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
               {
                   { "Title", ProjectFieldNames.PlanningPermissionStatus },
                   { "Value", TemporaryFormOptions.PermissionStatus.GetSummaryLabel(Model?.PlanningPermissionStatus) },
                   { "Link", Url.Action("PlanningPermissionStatus", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
                   { "LinkId", "planning-permission-status" },
                   { "IsEditable", Model?.IsEditable() }
               })
    }

    @if (Model.LocationOption == null || Model.LocationOption == "coordinates")
    {
        @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
               {
                   { "Title", ProjectFieldNames.Coordinates },
                   { "Value", Model?.LocationCoordinates },
                   { "Link", Url.Action("Location", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
                   { "LinkId", "coordinates" },
                   { "IsEditable", Model?.IsEditable() }
               })
    }

    @if (Model.LocationOption == null || Model.LocationOption == "landRegistryTitleNumber")
    {
        @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
               {
                   { "Title", ProjectFieldNames.LandRegistryTitleNumber },
                   { "Value", Model?.LocationLandRegistry },
                   { "Link", Url.Action("Location", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
                   { "LinkId", "land-registry-title-number" },
                   { "IsEditable", Model?.IsEditable() }
               })
    }

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
           {
               { "Title", ProjectFieldNames.LandOwnership },
               { "Value", Model?.Ownership },
               { "Link", Url.Action("Ownership", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
               { "LinkId", "ownership" },
               { "IsEditable", Model?.IsEditable() }
           })

    @if (Model.Ownership == "Yes")
    {
        @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
               {
                   { "Title", ProjectFieldNames.AdditionalDetails },
                   { "Value", additionalProjectDetails },
                   { "Link", Url.Action("AdditionalDetails", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
                   { "LinkId", "additional-details" },
                   { "IsEditable", Model?.IsEditable() }
               })
    }

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
           {
               { "Title", ProjectFieldNames.GrantFundingExists },
               { "Value", TemporaryFormOptions.GrantFunding.GetSummaryLabel(Model?.GrantFundingStatus) },
               { "Link", Url.Action("GrantFundingExists", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
               { "LinkId", "grant-funding-exists" },
               { "IsEditable", Model?.IsEditable() }
           })

    @if (Model.GrantFundingStatus == "Yes")
    {
        @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
               {
                   { "Title", ProjectFieldNames.GrantFunding },
                   { "Value", grantFundingMore },
                   { "Link", Url.Action("GrantFunding", "Project", new { id = id, projectId = Model.ProjectId, redirect = "CheckAnswers" }) },
                   { "LinkId", "grant-funding" },
                   { "IsEditable", Model?.IsEditable() }
               })
    }

    @*@await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
    {
    { "Title", "Legal charges" },
    { "Value", Model?.ChargesDebtInfo != null ? $"{ Model.ChargesDebt }, { Model.ChargesDebtInfo }" : $"{ Model?.ChargesDebt }" },
    { "Link", Url.Action("Change","Site", new {id = id, site=Model.Id, state = "ChargesDebt" }) },
    { "IsEditable", Model?.IsEditable() }
    })

    @await Html.PartialAsync("_CheckAnswersRow", new ViewDataDictionary(ViewData)
    {
    { "Title", "Affordable homes" },
    { "Value", Model?.AffordableHomes },
    { "Link", Url.Action("Change","Site", new {id = id, site=Model.Id, state = "AffordableHomes" }) },
    { "IsEditable", Model?.IsEditable() }
    }) *@

</gds-summary-list>
